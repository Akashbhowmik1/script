<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <meta name="description" content="Script Hub Bypass - Instant link bypass tool. No ads, no waiting."/>
  <title>Script Hub Bypass</title>

  <script data-cfasync="false" src="//dcbbwymp1bhlf.cloudfront.net/?wbbcd=1236085"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="https://scripthub.fun/scripthub/assets/titel.png">
  <style>
    :root {
      --bg-primary: #05050f;
      --bg-secondary: #0b0b1a;
      --bg-card: rgba(20, 25, 55, 0.85);
      --bg-input: rgba(30, 35, 75, 0.75);
      --text-primary: #ffffff;
      --text-secondary: #c8c8e8;
      --accent-primary: #6366f1;
      --accent-secondary: #8b5cf6;
      --accent-gradient: linear-gradient(135deg, #6366f1, #8b5cf6);
      --border: rgba(120, 120, 220, 0.25);
      --shadow-sm: 0 4px 16px rgba(0, 0, 0, 0.4);
      --shadow-md: 0 12px 32px rgba(0, 0, 0, 0.5);
      --shadow-lg: 0 20px 50px rgba(0, 0, 0, 0.6);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --radius: 16px;
      --radius-sm: 12px;
    }

    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-primary);
      background-image:
        radial-gradient(circle at 10% 90%, rgba(99, 102, 241, 0.18) 0%, transparent 50%),
        radial-gradient(circle at 90% 10%, rgba(139, 92, 246, 0.18) 0%, transparent 50%);
      color: var(--text-primary);
      overflow: hidden;
      -webkit-text-size-adjust: 100%;
      -webkit-tap-highlight-color: transparent;
    }

    #app-container {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    #main-scroll {
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
      scroll-behavior: smooth;
      padding-bottom: 160px;
      -webkit-overflow-scrolling: touch;
    }

    #main-scroll::-webkit-scrollbar {
      width: 0;
      height: 0;
    }

    header {
      background: var(--bg-secondary);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      padding: 20px 16px;
      text-align: center;
      position: relative;
      box-shadow: var(--shadow-md);
    }

    .site-logo {
      display: flex;
      justify-content: center;
      margin-bottom: 12px;
    }

    .site-logo img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border-radius: 16px;
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
    }

    header h1 {
      font-size: clamp(26px, 6vw, 38px);
      font-weight: 800;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
    }

    header p {
      font-size: clamp(14px, 3.5vw, 16px);
      color: var(--text-secondary);
      max-width: 900px;
      margin: 0 auto 16px;
      line-height: 1.6;
    }

    #clear-btn {
      background: rgba(99, 102, 241, 0.15);
      border: 1px solid rgba(99, 102, 241, 0.4);
      color: var(--text-primary);
      padding: 8px 20px;
      border-radius: 999px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: var(--transition);
    }

    #clear-btn:hover {
      background: var(--accent-primary);
    }

    .top-left-buttons {
      position: absolute;
      top: 12px;
      left: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      z-index: 20;
    }

    .top-left-buttons a {
      width: 42px;
      height: 42px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
      border: 1px solid rgba(255, 255, 255, 0.15);
    }

    .top-left-buttons a:hover {
      transform: scale(1.12);
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
    }

    .top-left-buttons img {
      width: 28px;
      height: 24px;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
    }

    .top-right-menu {
      position: absolute;
      top: 12px;
      right: 12px;
      z-index: 20;
    }

    #user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--accent-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 17px;
      color: #fff;
      box-shadow: var(--shadow-sm);
      overflow: hidden;
      cursor: pointer;
      transition: var(--transition);
      border: 2px solid transparent;
    }

    #user-avatar.online {
      border-color: #43b581;
    }

    #user-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* ===== Login button state (before login) ===== */
#user-avatar.login-btn {
  width: auto;
  height: 40px;
  padding: 0 18px;
  border-radius: 999px;
  background: linear-gradient(135deg, #6366f1, #8b5cf6);
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 0.4px;
}

/* Hover effect */
#user-avatar.login-btn:hover {
  transform: scale(1.06);
  box-shadow: 0 0 20px rgba(99, 102, 241, 0.6);
}


    .dropdown-menu {
      position: absolute;
      top: 48px;
      right: 0;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-lg);
      display: flex;
      flex-direction: column;
      min-width: 180px;
      overflow: hidden;
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
    }

    .dropdown-menu.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-menu button,
    .dropdown-menu div {
      background: none;
      border: none;
      color: var(--text-primary);
      padding: 12px 16px;
      text-align: left;
      cursor: pointer;
      transition: var(--transition);
      font-size: 15px;
      font-weight: 500;
      width: 100%;
    }

    .dropdown-menu button:hover,
    .dropdown-menu div:hover {
      background: rgba(99, 102, 241, 0.2);
    }

    #user-stats {
      font-size: 13px;
      color: var(--text-secondary);
      padding: 10px 16px;
      border-top: 1px solid var(--border);
      cursor: default;
    }

    /* ========================= BIG WELCOME MESSAGE ========================= */
    #welcome-message {
      text-align: center;
      max-width: 1100px;
      margin: 0 auto;
      padding: 60px 20px 50px;
    }

    #welcome-message h2 {
      font-size: clamp(30px, 8vw, 48px);
      font-weight: 900;
      letter-spacing: 0.6px;
      line-height: 1.2;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 24px;
    }

    #welcome-message p {
      font-size: clamp(16px, 4.5vw, 20px);
      margin: 18px 0;
      color: var(--text-secondary);
      line-height: 1.8;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }

    #welcome-message p:first-of-type {
      font-weight: 600;
      color: var(--text-primary);
    }

    #supported {
      margin: 36px 0;
      font-size: clamp(15px, 4vw, 18px);
      font-weight: 700;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    #login-required-notice {
      text-align: center;
      padding: 16px;
      background: rgba(239, 68, 68, 0.15);
      border: 1px solid rgba(239, 68, 68, 0.4);
      border-radius: 16px;
      margin: 20px auto;
      max-width: 90%;
      color: #fca5a5;
      font-size: 15px;
    }

    #login-required-notice strong {
      color: #ff6b6b;
    }

    #chat-container {
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .message {
      max-width: 92%;
      display: flex;
      gap: 10px;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.4s ease forwards;
    }

    .message.user {
      align-self: flex-end;
      flex-direction: row-reverse;
    }

    .avatar {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: var(--accent-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 16px;
      color: #fff;
      flex-shrink: 0;
      box-shadow: var(--shadow-sm);
      overflow: hidden;
    }

    .message.user .avatar {
      background: var(--accent-secondary);
    }

    .avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .bubble {
      background: var(--bg-card);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      padding: 12px 18px;
      border-radius: var(--radius);
      border-top-left-radius: 8px;
      font-size: 15px;
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--border);
      white-space: pre-wrap;
      word-wrap: break-word;
      line-height: 1.6;
      position: relative;
      overflow-wrap: anywhere;
    }

    .message.user .bubble {
      border-top-right-radius: 8px;
      border-top-left-radius: var(--radius);
      background: var(--accent-gradient);
      color: white;
    }

    .bubble a {
      color: #c8c8ff;
      text-decoration: underline;
      font-weight: 600;
      word-break: break-all;
      overflow-wrap: anywhere;
    }

    .bubble.error {
      background: rgba(239, 68, 68, 0.2);
      border-color: #ef4444;
      color: #fca5a5;
    }

    .bubble.bot-link {
      cursor: pointer;
      transition: var(--transition);
      user-select: none;
    }

    .bubble.bot-link:hover {
      background: rgba(99, 102, 241, 0.25);
      transform: translateY(-2px);
    }

    .bubble.bot-link::after {
      content: "Click to copy";
      position: absolute;
      top: 6px;
      right: 10px;
      font-size: 11px;
      color: rgba(255, 255, 255, 0.6);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .bubble.bot-link:hover::after {
      opacity: 1;
    }

    #input-container {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-secondary);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-top: 1px solid var(--border);
      padding: 12px 12px calc(12px + env(safe-area-inset-bottom));
      display: flex;
      gap: 10px;
      align-items: flex-end;
      box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.5);
      z-index: 10;
    }

    #user-input {
      flex: 1;
      background: var(--bg-input);
      border: 1px solid var(--border);
      color: var(--text-primary);
      padding: 14px 18px;
      border-radius: 28px;
      font-size: 16px;
      resize: none;
      min-height: 50px;
      max-height: 150px;
      overflow-y: auto;
      outline: none;
      transition: var(--transition);
    }

    #user-input::placeholder {
      color: var(--text-secondary);
    }

    #user-input:focus {
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.3);
    }

    #send-btn {
      background: var(--accent-gradient);
      border: none;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-md);
      transition: var(--transition);
      flex-shrink: 0;
    }

    #send-btn:hover {
      transform: scale(1.08);
    }

    #send-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .send-icon {
      width: 20px;
      height: 20px;
      fill: #fff;
    }

    #modal, #login-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
    }

    #modal.active, #login-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: var(--bg-secondary);
      border-radius: var(--radius);
      max-width: 92%;
      max-height: 92%;
      width: 800px;
      display: flex;
      flex-direction: column;
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--border);
    }

    .modal-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
    }

    .modal-header h3 {
      font-size: 19px;
      font-weight: 700;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    #close-modal, #close-login-modal {
      background: none;
      border: none;
      color: var(--text-secondary);
      font-size: 26px;
      cursor: pointer;
    }

    .modal-body {
      padding: 20px;
      overflow-y: auto;
      flex: 1;
      -webkit-overflow-scrolling: touch;
    }

    .category h4 {
      font-size: 17px;
      margin-bottom: 10px;
      color: var(--accent-primary);
    }

    .category ul {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
    }

    .category li {
      background: var(--bg-card);
      padding: 12px 16px;
      border-radius: 12px;
      border: 1px solid var(--border);
    }

    .typing-indicator span {
      display: inline-block;
      width: 8px;
      height: 8px;
      background: var(--text-secondary);
      border-radius: 50%;
      margin: 0 4px;
      animation: typing 1.4s infinite ease-in-out;
    }

    .typing-indicator span:nth-child(1) { animation-delay: 0s; }
    .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
    .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typing {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    @keyframes fadeInUp {
      to { opacity: 1; transform: translateY(0); }
    }

    /* ==================== LOGIN MODAL STYLES ==================== */
    #login-form {
      display: flex;
      flex-direction: column;
      gap: 18px;
      width: 100%;
    }

    #login-form input {
      width: 100%;
      background: var(--bg-input);
      border: 1px solid var(--border);
      color: var(--text-primary);
      padding: 16px 20px;
      border-radius: 16px;
      font-size: 17px;
      transition: var(--transition);
      box-sizing: border-box;
    }

    #login-form input::placeholder {
      color: var(--text-secondary);
      opacity: 0.8;
    }

    #login-form input:focus {
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 5px rgba(99, 102, 241, 0.35);
      outline: none;
    }

    #login-form button {
      width: 100%;
      background: var(--accent-gradient);
      border: none;
      padding: 16px;
      border-radius: 16px;
      color: white;
      font-weight: 700;
      font-size: 17px;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow-md);
    }

    #login-form button:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-lg);
    }

    #remember-me {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 15px;
      color: var(--text-secondary);
      cursor: pointer;
      user-select: none;
    }

    #remember-me input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: var(--accent-primary);
      cursor: pointer;
      border-radius: 4px;
    }

        #login-error {
      color: #ff6b6b;
      font-size: 14.5px;
      font-weight: 500;
      text-align: center;
      background: rgba(239, 68, 68, 0.18);
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(239, 68, 68, 0.35);
      min-height: 26px;
      margin-top: 8px;
      line-height: 1.4;
      opacity: 0;
      transition: opacity 0.3s ease, transform 0.3s ease;
      transform: translateY(-4px);
    }

    /* When error is visible (add .show class via JS when error occurs) */
    #login-error.show {
      opacity: 1;
      transform: translateY(0);
    }

    #login-status {
      margin-top: 12px;
      font-size: 15px;
      font-weight: 600;
      text-align: center;
      color: var(--accent-primary);
      min-height: 26px;
      line-height: 1.4;
      opacity: 0;
      transition: opacity 0.3s ease, transform 0.3s ease;
      transform: translateY(-4px);
    }

    /* When status is visible (add .show class via JS when needed) */
    #login-status.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* Mobile adjustment */
    @media (max-width: 480px) {
      #login-error,
      #login-status {
        font-size: 14px;
        padding: 9px 12px;
        min-height: 24px;
      }
    }
    /* ==================== ABOUT US STYLES ==================== */
    .about-content {
      line-height: 1.8;
      font-size: 15px;
      color: var(--text-primary);
      text-align: center;
    }

    .about-title {
      font-size: 24px;
      font-weight: 800;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 12px;
    }

    .about-subtitle {
      font-size: 17px;
      color: var(--text-secondary);
      margin-bottom: 20px;
      font-weight: 500;
    }

    .about-credit {
      margin-top: 20px;
      font-style: italic;
      color: var(--text-secondary);
    }

    .about-footer {
      margin-top: 28px;
      font-size: 17px;
      font-weight: 700;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* ==================== MEDIA QUERIES FOR FULL MOBILE RESPONSIVENESS ==================== */
    @media (max-width: 768px) {
      header {
        padding: 16px 12px;
      }

      .site-logo img {
        width: 56px;
        height: 56px;
      }

      .top-left-buttons {
        top: 10px;
        left: 10px;
        gap: 6px;
      }

      .top-left-buttons a {
        width: 38px;
        height: 38px;
      }

      .top-left-buttons img {
        width: 24px;
        height: 20px;
      }

      #welcome-message {
        padding: 50px 16px 40px;
      }

      #welcome-message h2 {
        font-size: clamp(28px, 9vw, 40px);
      }

      .modal-content {
        width: 95%;
        max-width: none;
      }

      #login-modal .modal-content {
        width: 92%;
      }
    }

    @media (max-width: 480px) {
      header h1 {
        font-size: clamp(24px, 7vw, 32px);
      }

      header p {
        font-size: 14px;
      }

      .site-logo img {
        width: 50px;
        height: 50px;
      }

      #welcome-message {
        padding: 40px 14px 30px;
      }

      #welcome-message h2 {
        font-size: clamp(26px, 8vw, 36px);
      }

      #welcome-message p {
        font-size: 16px;
      }

      .message {
        max-width: 95%;
      }

      .avatar {
        width: 36px;
        height: 36px;
        font-size: 15px;
      }

      .bubble {
        padding: 10px 16px;
        font-size: 14.5px;
      }

      #input-container {
        padding: 10px 10px calc(10px + env(safe-area-inset-bottom));
      }

      #user-input {
        padding: 12px 16px;
        font-size: 16px; /* Prevents zoom on iOS */
        min-height: 48px;
      }

      #send-btn {
        width: 48px;
        height: 48px;
      }

      .category ul {
        grid-template-columns: 1fr;
      }

      .dropdown-menu {
        min-width: 160px;
        right: 4px;
      }
    }

    @media (max-width: 360px) {
      #user-input {
        font-size: 15px;
      }

      .bubble {
        font-size: 14px;
      }
    }
</style>
</head>
<body>
  <!-- The rest of your HTML body remains EXACTLY the same as provided -->
  <div id="app-container">
    <div id="main-scroll">
      <header>
        <div class="top-left-buttons">
          <a href="https://www.youtube.com/@ScriptFarmer/videos" target="_blank" rel="noopener noreferrer">
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/09/YouTube_full-color_icon_(2017).svg" alt="YouTube">
          </a>
          <a href="https://discord.gg/7q2TvZ9GYX" target="_blank" rel="noopener noreferrer">
            <img src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a6a49cf127bf92de1e2_icon_clyde_blurple_RGB.png" alt="Discord">
          </a>
        </div>
        <div class="top-right-menu">
          <div id="user-avatar" class="login-btn" title="Click to login">
           Login
          </div>

          <div class="dropdown-menu" id="dropdown-menu">
            <button id="supported-links-btn">Supported Links</button>
            <button id="about-us-btn">About Us</button>
            <div id="user-stats" style="display:none;">Messages sent: 0</div>
            <button id="logout-btn" style="display:none;">Logout</button>
            <button id="export-users-btn" style="display:none;">Export User Data (Admin Only)</button>
          </div>
        </div>
        <div class="site-logo">
          <img src="https://scripthub.fun/scripthub/assets/titel.png" alt="Script Hub Logo">
        </div>
        <h1>Script Hub Bypass</h1>
        <p>No delays. No ads. No tasks. Instant bypass for all major services.</p>
        <button id="clear-btn">Clear Chat</button>
      </header>
      <div id="chat-container">
        <div id="welcome-message">
          <h2>Instant Direct Links â€“ No Waiting</h2>
          <p>Paste any protected link and get the direct destination instantly.</p>
          <p>Specialized for Roblox script hubs with key systems and ad-links.</p>
          <div id="supported">Supported: Linkvertise â€¢ Work.ink â€¢ Rekonise â€¢ Boost.ink â€¢ Sub4Unlock â€¢ Key Systems & more</div>
          <p>Secure â€¢ Fast â€¢ Free âš¡</p>
        </div>
        <div id="login-required-notice">
          <strong>Login required to use the bypass tool</strong><br>
          Please log in or create an account to start bypassing links.
        </div>
      </div>
    </div>
  </div>
  <div id="input-container">
    <textarea id="user-input" placeholder="Paste your link here..." disabled></textarea>
    <button id="send-btn" disabled>
      <svg class="send-icon" viewBox="0 0 24 24"><path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/></svg>
    </button>
  </div>

  <!-- General Modal -->
  <div id="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modal-title"></h3>
        <button id="close-modal">Ã—</button>
      </div>
      <div class="modal-body" id="modal-body"></div>
    </div>
  </div>

  <!-- Login Modal -->
  <div id="login-modal">
    <div class="modal-content" style="width:400px;max-width:92%;">
      <div class="modal-header">
        <h3>Login / Register</h3>
        <button id="close-login-modal">Ã—</button>
      </div>
      <div class="modal-body">
        <form id="login-form">
          <input type="text" id="discord-username" placeholder="Username (Discord username)" required>
          <input type="password" id="login-password" placeholder="Password" required>
          <label id="remember-me">
            <input type="checkbox" id="remember-checkbox" checked>
            <span>Remember me</span>
          </label>
          <div id="login-error"></div>
          <button type="submit">Login / Create Account</button>
          <div id="login-status"></div>
        </form>
      </div>
    </div>
  </div>

  <script>
  'use strict';
  const API_ENDPOINT = 'https://steep-pine-9afc.akashbhowmik110.workers.dev/bypass';
  const ADMIN_USERNAME = 'Akashadmin123';
  const USER_AVATAR_URL = 'https://www.pngitem.com/pimgs/m/22-220721_circled-user-male-type-user-colorful-icon-png.png';
  const ANALYTICS_ENDPOINT = 'https://user-listd638.akashbhowmik110.workers.dev/track';

  let currentUser = null;
  let chatHistory = [];
  const MAX_HISTORY = 50;
  const CHAT_VERSION = 4;


    

  // =============== STORAGE FUNCTIONS ===============
  const getChatKey = () => currentUser ? `scripthub_chat_v${CHAT_VERSION}_${currentUser}` : null;

  const saveChat = () => {
    if (!currentUser) return;
    const key = getChatKey();
    if (!key) return;
    const payload = { version: CHAT_VERSION, updatedAt: Date.now(), messages: chatHistory.slice(-MAX_HISTORY) };
    try {
      localStorage.setItem(key, JSON.stringify(payload));
    } catch (e) {
      console.error('Save chat failed', e);
    }
  };

  const loadChat = () => {
    if (!currentUser) return [];
    const key = getChatKey();
    if (!key) return [];
    try {
      const raw = localStorage.getItem(key);
      if (!raw) return [];
      const data = JSON.parse(raw);
      if (data?.version !== CHAT_VERSION || !Array.isArray(data.messages)) return [];
      return data.messages.slice(-MAX_HISTORY);
    } catch (e) {
      console.error('Load chat failed', e);
      return [];
    }
  };

  // Aggressive auto-save
  window.addEventListener('beforeunload', saveChat);
  document.addEventListener('visibilitychange', () => {
    if (document.visibilityState === 'hidden') saveChat();
  });
  setInterval(() => { if (currentUser) saveChat(); }, 3000);

  // =============== ELEMENTS ===============
  const chatContainer = document.getElementById('chat-container');
  const mainScroll = document.getElementById('main-scroll');
  const userInput = document.getElementById('user-input');
  const sendBtn = document.getElementById('send-btn');
  const clearBtn = document.getElementById('clear-btn');
  const welcomeMessage = document.getElementById('welcome-message');
  const loginRequiredNotice = document.getElementById('login-required-notice');
  const dropdown = document.getElementById('dropdown-menu');
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modal-title');
  const modalBody = document.getElementById('modal-body');
  const closeModal = document.getElementById('close-modal');
  const loginModal = document.getElementById('login-modal');
  const closeLoginModal = document.getElementById('close-login-modal');
  const userAvatar = document.getElementById('user-avatar');
  const logoutBtn = document.getElementById('logout-btn');
  const exportBtn = document.getElementById('export-users-btn');
  const userStats = document.getElementById('user-stats');

  // =============== USERS MANAGEMENT ===============
  let users = {};
  try {
    const stored = localStorage.getItem('bypassUsers');
    if (stored) users = JSON.parse(stored);
  } catch (e) { users = {}; }

  const saveUsers = () => {
    try { localStorage.setItem('bypassUsers', JSON.stringify(users)); } catch (e) { console.error(e); }
  };

  // =============== UI FUNCTIONS ===============
  const updateAvatar = () => {
  if (!currentUser) {
    userAvatar.textContent = 'Login';
    userAvatar.classList.add('login-btn');
    userAvatar.classList.remove('online');
  } else {
    userAvatar.innerHTML = `<img src="${USER_AVATAR_URL}" alt="${currentUser}">`;
    userAvatar.classList.remove('login-btn');
    userAvatar.classList.add('online');
  }
};


  const updateUI = () => {
    updateAvatar();
    userAvatar.title = currentUser ? currentUser : 'Click to login';
    logoutBtn.style.display = currentUser ? 'block' : 'none';
    exportBtn.style.display = (currentUser === ADMIN_USERNAME) ? 'block' : 'none';
    userStats.style.display = currentUser ? 'block' : 'none';
    userStats.textContent = currentUser && users[currentUser] ? `Messages sent: ${users[currentUser].messageCount || 0}` : '';
    userInput.disabled = !currentUser;
    sendBtn.disabled = true;
    loginRequiredNotice.style.display = currentUser ? 'none' : 'block';
  };

  const scrollToBottom = () => { mainScroll.scrollTop = mainScroll.scrollHeight; };

  const renderChatHistory = () => {
    chatContainer.innerHTML = '';
    if (chatHistory.length === 0) {
      chatContainer.appendChild(welcomeMessage.cloneNode(true));
      if (!currentUser) chatContainer.appendChild(loginRequiredNotice.cloneNode(true));
    }
    chatHistory.forEach(msg => addMessage(msg.sender, msg.text, msg.isError));
    scrollToBottom();
  };

  const addMessage = (sender, text, isError = false) => {
    const div = document.createElement('div');
    div.className = `message ${sender}`;
    const avatar = document.createElement('div');
    avatar.className = 'avatar';
    const img = document.createElement('img');
    img.src = sender === 'bot' ? 'https://scripthub.fun/scripthub/assets/titel.png' : USER_AVATAR_URL;
    img.alt = sender === 'bot' ? 'Bot' : currentUser || 'User';
    avatar.appendChild(img);

    const bubble = document.createElement('div');
    bubble.className = `bubble${isError ? ' error' : ''}`;

    if (sender === 'bot' && (text.includes('Direct link:') || text.includes('Bypassed!'))) {
      bubble.classList.add('bot-link');
      bubble.onclick = () => {
        const match = text.match(/(https?:\/\/[^\s\n]+)/);
        const link = match ? match[0] : text;
        navigator.clipboard.writeText(link);
        const toast = document.createElement('div');
        toast.textContent = 'Copied!';
        toast.style.cssText = 'position:fixed;bottom:80px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.8);color:white;padding:10px 20px;border-radius:8px;z-index:1000;font-size:14px;';
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 2000);
      };
    }

    const urlRegex = /(https?:\/\/[^\s]+)/g;
    if (urlRegex.test(text)) {
      const parts = text.split(urlRegex);
      parts.forEach(part => {
        if (urlRegex.test(part)) {
          const a = document.createElement('a');
          a.href = part;
          a.textContent = part;
          a.target = '_blank';
          a.rel = 'noopener noreferrer';
          bubble.appendChild(a);
        } else if (part.trim()) {
          bubble.appendChild(document.createTextNode(part));
        }
      });
    } else {
      bubble.textContent = text;
    }

    div.appendChild(avatar);
    div.appendChild(bubble);
    chatContainer.appendChild(div);
    scrollToBottom();
  };

  const addTypingIndicator = () => {
    const div = document.createElement('div');
    div.className = 'message';
    div.id = 'typing-indicator';
    const avatar = document.createElement('div');
    avatar.className = 'avatar';
    const img = document.createElement('img');
    img.src = 'https://scripthub.fun/scripthub/assets/titel.png';
    img.alt = 'Bot';
    avatar.appendChild(img);
    const bubble = document.createElement('div');
    bubble.className = 'bubble';
    bubble.innerHTML = '<div class="typing-indicator"><span></span><span></span><span></span></div>';
    div.appendChild(avatar);
    div.appendChild(bubble);
    chatContainer.appendChild(div);
    scrollToBottom();
  };

  const removeTypingIndicator = () => {
    const el = document.getElementById('typing-indicator');
    if (el) el.remove();
  };

  const clearChat = () => {
    if (chatHistory.length === 0 || confirm('Clear all chat history?')) {
      chatHistory = [];
      const key = getChatKey();
      if (key) localStorage.removeItem(key);
      renderChatHistory();
    }
  };

 const bypassLink = async (link) => {
  try {
    const resp = await fetch(
      `${API_ENDPOINT}?url=${encodeURIComponent(link.trim())}`,
      {
        method: 'GET',
        mode: 'cors',
        cache: 'no-store' // prevents browser upgrade â†’ no preflight
      }
    );

    if (!resp.ok) {
      const t = await resp.text();
      throw new Error(`HTTP ${resp.status}: ${t}`);
    }

    const data = await resp.json().catch(() => ({}));

    if (data?.success && data.destination)
      return `Bypassed! ðŸŽ‰\nDirect link: ${data.destination}`;

    if (data?.status === 'success' && data.result)
      return `Bypassed! ðŸŽ‰\nDirect link: ${data.result}`;

    if (data?.bypassed || data?.direct_url)
      return `Bypassed! ðŸŽ‰\nDirect link: ${data.bypassed || data.direct_url}`;

    const match = JSON.stringify(data).match(/https?:\/\/[^\s"']+/);
    return match
      ? `Bypassed! ðŸŽ‰\nDirect link: ${match[0]}`
      : 'Error: API returned no direct link.';

  } catch (err) {
    console.error('Bypass failed:', err);
    return 'Error: Unsupported or invalid link. Please try another.';
  }
};



  // =============== MAIN SEND HANDLER (FINAL FIXED) ===============
const handleSend = async () => {
  if (!currentUser) return;

  const text = userInput.value.trim();
  if (!text) return;

  // Always save user's message locally
  addMessage('user', text);
  chatHistory.push({ sender: 'user', text });
  chatHistory = chatHistory.slice(-MAX_HISTORY);
  saveChat();

  // Update local message count
  users[currentUser] = users[currentUser] || { messageCount: 0 };
  users[currentUser].messageCount++;
  saveUsers();

  // Clear input UI
  userInput.value = '';
  userInput.style.height = '52px';
  sendBtn.disabled = true;

  // âŒ Validate URL FIRST
  if (!/^https?:\/\//i.test(text)) {
    const errorMsg = 'Please enter a valid URL starting with http:// or https://';
    addMessage('bot', errorMsg, true);
    chatHistory.push({ sender: 'bot', text: errorMsg, isError: true });
    chatHistory = chatHistory.slice(-MAX_HISTORY);
    saveChat();
    return;
  }

  // âœ… GLOBAL ANALYTICS (ONLY FOR VALID LINKS)
  fetch(ANALYTICS_ENDPOINT, {

    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ username: currentUser })
  }).catch(() => {});

  // Valid URL â†’ proceed with bypass
  addTypingIndicator();

  const response = await bypassLink(text);
  removeTypingIndicator();

  const isError = response.startsWith('Error:');
  addMessage('bot', response, isError);
  chatHistory.push({ sender: 'bot', text: response, isError });
  chatHistory = chatHistory.slice(-MAX_HISTORY);
  saveChat();
};
     

  // =============== LOGIN SYSTEM ===============
  document.getElementById('login-form').addEventListener('submit', e => {
    e.preventDefault();
    const username = document.getElementById('discord-username').value.trim();
    const password = document.getElementById('login-password').value;
    const remember = document.getElementById('remember-checkbox').checked;
    const statusEl = document.getElementById('login-status');
    const errorEl = document.getElementById('login-error');

    if (!username || !password) {
      errorEl.textContent = 'Please fill all fields';
      return;
    }

    errorEl.textContent = '';
    statusEl.textContent = 'Processing...';

    setTimeout(() => {
      if (users[username] && users[username].password !== password) {
        errorEl.textContent = 'Invalid password';
        statusEl.textContent = '';
        return;
      }

      if (!users[username]) {
        users[username] = { password, messageCount: 0 };
        saveUsers();
        statusEl.textContent = 'Account created!';
      } else {
        statusEl.textContent = 'Welcome back!';
      }

      currentUser = username;
      if (remember) localStorage.setItem('currentBypassUser', username);
      else localStorage.removeItem('currentBypassUser');

      chatHistory = loadChat();
      updateUI();
      renderChatHistory();
      loginModal.classList.remove('active');
      setTimeout(() => statusEl.textContent = '', 2000);
    }, 800);
  });

  // =============== AVATAR & DROPDOWN ===============
  userAvatar.addEventListener('click', () => {
    if (currentUser) {
      dropdown.classList.toggle('show');
    } else {
      loginModal.classList.add('active');
    }
  });

  document.addEventListener('click', e => {
    if (!userAvatar.contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.classList.remove('show');
    }
  });

  logoutBtn.addEventListener('click', () => {
    currentUser = null;
    chatHistory = [];
    localStorage.removeItem('currentBypassUser');
    updateUI();
    renderChatHistory();
    dropdown.classList.remove('show');
  });

  exportBtn.addEventListener('click', () => {
    const blob = new Blob([JSON.stringify(users, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'scripthub_users.json';
    a.click();
    URL.revokeObjectURL(url);
    dropdown.classList.remove('show');
  });

  // =============== MODALS ===============
  document.getElementById('supported-links-btn').addEventListener('click', () => {
    modalTitle.textContent = 'Supported Links';
    modalBody.innerHTML = `
      <div class="category"><h4>Key Systems</h4><ul>
        <li>Platoboost</li><li>Pandadevelopment</li><li>Violated</li><li>Blox-script</li><li>Kapao-hub</li><li>Overdrivehub</li><li>Codex</li>
      </ul></div>
      <div class="category"><h4>Ad-Links & Shorteners</h4><ul>
        <li>Linkvertise</li><li>Work.ink</li><li>Loot-Link</li><li>Rekonise</li><li>Boost.ink</li><li>Sub4Unlock</li><li>Sub2Unlock</li>
        <li>and 40+ more</li>
      </ul></div>
      <div class="category"><h4>Paste Services</h4><ul>
        <li>Pastebin</li><li>Paste-Drop</li><li>Pastefy</li><li>Pasterso</li>
      </ul></div>
    `;
    modal.classList.add('active');
    dropdown.classList.remove('show');
  });

  document.getElementById('about-us-btn').addEventListener('click', () => {
    modalTitle.textContent = 'About Us';
    modalBody.innerHTML = `
      <div class="about-content">
        <p class="about-title">Script Hub Bypass</p>
        <p class="about-subtitle">A fast, free, and privacy-focused bypass solution built for modern Roblox script hubs.</p>
        <p>Developed by the <strong>Script Hub community</strong>, this tool helps you bypass ad-links and key systems without unnecessary waits or intrusive tracking.</p>
        <p>No user data is stored on servers. Everything is saved locally in your browser.</p>
        <p class="about-credit">Created and maintained by <strong>Akash</strong> <span>(Discord: <b>akash5608</b>)</span></p>
        <p class="about-footer"><strong>Built by the community, for the community.</strong></p>
      </div>
    `;
    modal.classList.add('active');
    dropdown.classList.remove('show');
  });

  closeModal.onclick = () => modal.classList.remove('active');
  closeLoginModal.onclick = () => loginModal.classList.remove('active');
  modal.onclick = e => { if (e.target === modal) modal.classList.remove('active'); };
  loginModal.onclick = e => { if (e.target === loginModal) loginModal.classList.remove('active'); };

  // =============== INPUT & BUTTONS ===============
  userInput.addEventListener('input', () => {
    userInput.style.height = '52px';
    userInput.style.height = `${userInput.scrollHeight}px`;
    sendBtn.disabled = !userInput.value.trim();
  });

  userInput.addEventListener('keydown', e => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      handleSend();
    }
  });

  sendBtn.addEventListener('click', handleSend);
  clearBtn.addEventListener('click', clearChat);

  // =============== INITIAL LOAD ===============
  const initApp = () => {
    const savedUser = localStorage.getItem('currentBypassUser');
    if (savedUser && users[savedUser]) {
      currentUser = savedUser;
      chatHistory = loadChat();
    }
    updateUI();
    renderChatHistory();
  };

  initApp();
</script>
</body>
</html>



